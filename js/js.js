//ENTORNOvar g=1.622;var dt=0.016683;var timer=null;var timerFuel=null;//NAVEvar y=10; // altura inicial y0=10%, debe leerse al iniciar si queremos que tenga alturas diferentes dependiendo del dispositivovar v=0;var c=100;var a=g; //la aceleración cambia cuando se enciende el motor de a=g a a=-g (simplificado)//MARCADORESvar velocidad=null;var altura=null;var combustible=null;//al cargar por completo la página...window.onload=function(){velocidad=document.getElementById("velocidad");altura=document.getElementById("altura");combustible=document.getElementById("fuel");//definición de eventos//mostrar menú móvil document.getElementById("opciones").onclick=function (){document.getElementById("menu").style.display="inline-block";stop();}//ocultar menú móvildocument.getElementById("jugar").onclick=function (){document.getElementById("menu").style.display="none";start();}//encender/apagar el motor al hacer click en la pantalladocument.onclick=function (){if (a==g){motorOn();}else{motorOff();}}//encender/apagar al apretar/soltar una tecladocument.onkeydown=function(event){if (event.keyCode==32){motorOn();}}document.onkeyup=motorOff;//Empezar a mover la nave justo después de cargar la páginastart()}//Definición de funcionesfunction start(){//cada intervalo de tiempo mueve la navetimer=setInterval(function(){moverNave();}, dt*1000);}function stop(){clearInterval(timer);}function moverNave(){//cambiar velocidad y posicionv +=a*dt;y +=v*dt;//actualizar marcadoresvelocidad.innerHTML=v.toFixed(2);altura.innerHTML=y.toFixed(2);//mover hasta que top sea un 70% de la pantallaif (y<70){document.getElementById("nave").style.top=y+"%";}else{stop();if (v>10){document.getElementById('navefuego').src="img/explosion.png";perder();}else{ganar();}}}function motorOn(){document.getElementById('navefuego').src="img/naveew2.png";//el motor da aceleración a la navea=-g;//mientras el motor esté activado gasta combustibleif (timerFuel==null)timerFuel=setInterval(function(){actualizarFuel();}, 10);}function motorOff(){document.getElementById('navefuego').src="img/navee.png";a=g;clearInterval(timerFuel);timerFuel=null;}function actualizarFuel(){//Restamos combustible hasta que se agotac-=0.1;if (c < 0 ) c=0;combustible.innerHTML=c.toFixed(0);if (c==0){motorOff()}}function ganar(){document.getElementById("ganar").style.display="inline-block";}function perder(){document.getElementById("perder").style.display="inline-block";}
